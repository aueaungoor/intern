<div class="container">
    <div class="top-right">
      <button *ngIf="isLoggedIn" class="logout-btn" (click)="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>
  
    <h1 class="title">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h1>
    <div class="mb-4 flex items-center gap-2">
      <input type="text" [(ngModel)]="searchKeyword" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Username / ‡∏ä‡∏∑‡πà‡∏≠ / ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"
             class="border p-2 rounded w-64" />
      <button (click)="searchAccounts()"
              class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
        üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
      </button>
      <button (click)="loadAccountspadding()"
              class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">
        üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
      </button>

      <button (click)="exportToCSV()">Export CSV</button>
<button (click)="exportToExcel()">Export Excel</button>

    </div>
    
    
    <table class="styled-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>Password</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠</th>
          <th>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
          <th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
          <th>‡πÄ‡∏û‡∏®</th>
          <th>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</th>
          <th>sport</th>
          <th>career</th>
          <th>action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let account of Accountlist">
          <td>{{ account.idaccount }}</td>
          <td>{{ account.username }}</td>
          <td>{{ account.password }}</td>
          <td>{{ account.fname }}</td>
          <td>{{ account.lname }}</td>
          <td>{{ account.description }}</td>
          <td>{{ account.gender }}</td>
          <td>{{ account.birthday }}</td>
          <td><button (click)="getSport(account)">‡∏î‡∏π Sport</button></td>
          <td><button (click)="getCareer(account)">‡∏î‡∏π Career</button></td>
          <td colspan="2">
            <button (click)="viewProfile(account.idaccount)">‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
          </td>
        </tr>
      </tbody>
      
    </table>
  
    <div class="pagination flex justify-center items-center gap-4 mt-4">
      <button
        class="bg-gray-300 px-4 py-2 rounded"
        (click)="previousPage()"
        [disabled]="paging.index <= 1">
        ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
      </button>
    
      <span>‡∏´‡∏ô‡πâ‡∏≤ {{ paging.index }} / {{ totalPages }}</span>
    
      <button
        class="bg-blue-500 text-white px-4 py-2 rounded"
        (click)="nextPage()"
       
        [disabled]="paging.index >= totalPages">
        ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
      </button>
    </div>
    
    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <div class="modal-overlay" *ngIf="showModal">
      <div class="modal-content modal-split">
        <h2 class="modal-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h2>
  
        <div class="modal-columns modal-columns-split">
          <!-- SPORT LIST -->
          <div class="modal-section" *ngIf="modalType === 'sport'">
            <h3>üèÖ ‡∏Å‡∏µ‡∏¨‡∏≤ (Sport)</h3>
            <ul>
              <li *ngFor="let item of modalData">
                {{ item.name }}
                <button class="delete-btn" (click)="deleteItem(item, 'sport' , item.id)">üóë</button>
              </li>
            </ul>
          </div>
          <div class="modal-section" *ngIf="modalType === 'sport'">
            <h4>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏´‡∏°‡πà</h4>
            <div class="checkbox-grid">
              <label *ngFor="let sport of allSports">
                <ng-container *ngIf="hasNotItem(sport)">
                  <input type="checkbox" (change)="onSelectToAdd(sport, 'sport', $event)" /> {{ sport }}
                </ng-container>
              </label>
            </div>
            <button (click)="submitAddSelected('sport')">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏µ‡∏¨‡∏≤</button>
          </div>
  
          <!-- CAREER LIST -->
          <div class="modal-section" *ngIf="modalType === 'career'">
            <h3>üíº ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û (Career)</h3>
            <ul>
              <li *ngFor="let item of modalData">
                {{ item.name }}
                <button class="delete-btn" (click)="deleteItem(item, 'career' , item.id)">üóë</button>
              </li>
            </ul>
          </div>
          <div class="modal-section" *ngIf="modalType === 'career'">
            <h4>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡πÉ‡∏´‡∏°‡πà</h4>
            <div class="checkbox-grid">
              <label *ngFor="let career of allCareers">
                <ng-container *ngIf="hasNotItem(career)">
                  <input type="checkbox" (change)="onSelectToAdd(career, 'career', $event)" /> {{ career }}
                </ng-container>
              </label>
            </div>
            <button (click)="submitAddSelected('career')">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</button>
          </div>
          
        </div>
  
        <button class="close-btn" (click)="closeModal()">‡∏õ‡∏¥‡∏î</button>
      </div>
    </div>
  
    <!-- Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Account -->
    <div class="modal-overlay" *ngIf="showEditModal">
      <div class="modal-content">
        <h2>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h2>
        <form *ngIf="editAccount" (ngSubmit)="submitEdit()" #f="ngForm">
          <label>‡∏ä‡∏∑‡πà‡∏≠</label>
          <input [(ngModel)]="editAccount.fname" name="fname" required />
  
          <label>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
          <input [(ngModel)]="editAccount.lname" name="lname" required />
  
          <label>Password</label>
          <input [(ngModel)]="editAccount.password" name="password" required type="password" />
  
          <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
          <textarea [(ngModel)]="editAccount.description" name="description"></textarea>

          
            <!-- <label class="register-label">New Profile Picture</label>
            <input
              type="file"
              (change)="/viewProfile"
              accept="image/*"
              class="register-input"
            />

            <img *ngIf="editAccount.pathpicture"
     [src]="editAccount.pathpicture"
     
     alt="‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå"
     width="60"
     height="60"
     style="border-radius: 50%;" />
          
  
          <br /> -->
          <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button class="close-btn" (click)="closeEditModal()" type="button">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </form>
      </div>
    </div>
  
    <!-- Modal ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö -->
    <div class="modal-overlay" *ngIf="showDeleteModal">
      <div class="modal-content">
        <h2>‚ö†Ô∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h2>
        <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
        <button (click)="deleteAccount()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        <button (click)="cancelDelete()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      </div>
    </div>
  </div>