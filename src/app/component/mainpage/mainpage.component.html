<div class="container">
  <div class="top-right">
    <button *ngIf="isLoggedIn" class="logout-btn" (click)="logout()">
      üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
    </button>
  </div>

  <h1 class="title">üìã ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h1>
  <div class="action-bar">
    <input
      type="text"
      [(ngModel)]="searchKeyword"
      placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Username / ‡∏ä‡∏∑‡πà‡∏≠ / ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"
      class="search-input"
    />

    <button (click)="searchAccounts()" class="action-btn blue">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    <button (click)="loadAccountspadding()" class="action-btn gray">
      ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
    </button>
    <button (click)="exportToCSV()" class="action-btn green">CSV</button>
    <button (click)="exportToExcel()" class="action-btn yellow">Excel</button>
    <button (click)="goToZipfilePage()" class="action-btn purple">ZIP</button>
  </div>

  <table class="styled-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Password</th>
        <th>‡∏ä‡∏∑‡πà‡∏≠</th>
        <th>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
        <th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
        <th>‡πÄ‡∏û‡∏®</th>
        <th>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</th>
        <th>‡∏Å‡∏µ‡∏¨‡∏≤</th>
        <th>‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</th>
        <th>‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let account of Accountlist">
        <td>{{ account.idaccount }}</td>
        <td>{{ account.username }}</td>
        <td>{{ account.password }}</td>
        <td>{{ account.fname }}</td>
        <td>{{ account.lname }}</td>
        <td>{{ account.description }}</td>
        <td>{{ account.gender }}</td>
        <td>{{ account.birthday }}</td>
        <td>
          <button class="table-action" (click)="getSport(account)">‡∏î‡∏π</button>
        </td>
        <td>
          <button class="table-action" (click)="getCareer(account)">‡∏î‡∏π</button>
        </td>
        <td>
          <button
            class="table-action primary"
            (click)="viewProfile(account.idaccount)"
          >
            ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <button (click)="previousPage()" [disabled]="paging.index <= 1">
      ‚Üê ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
    </button>
    <span>‡∏´‡∏ô‡πâ‡∏≤ {{ paging.index }} / {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="paging.index >= totalPages">
      ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
    </button>
  </div>

  <div class="modal-overlay" *ngIf="showModal">
    <div class="modal-content modal-split">
      <h2 class="modal-title">üßæ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h2>
      <div class="modal-columns modal-columns-split">
        <div class="modal-section" *ngIf="modalType === 'sport'">
          <h3>üèÖ ‡∏Å‡∏µ‡∏¨‡∏≤</h3>
          <ul>
            <li *ngFor="let item of modalData">
              {{ item.name }}
              <button
                class="delete-btn"
                (click)="deleteItem(item, 'sport', item.id)"
              >
                üóë
              </button>
            </li>
          </ul>
          <h4>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏µ‡∏¨‡∏≤</h4>
          <div class="checkbox-grid">
            <label *ngFor="let sport of allSports">
              <ng-container *ngIf="hasNotItem(sport)">
                <input
                  type="checkbox"
                  (change)="onSelectToAdd(sport, 'sport', $event)"
                />
                {{ sport }}
              </ng-container>
            </label>
          </div>
          <button class="confirm-btn" (click)="submitAddSelected('sport')">
            ‡πÄ‡∏û‡∏¥‡πà‡∏°
          </button>
        </div>

        <div class="modal-section" *ngIf="modalType === 'career'">
          <h3>üíº ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</h3>
          <ul>
            <li *ngFor="let item of modalData">
              {{ item.name }}
              <button
                class="delete-btn"
                (click)="deleteItem(item, 'career', item.id)"
              >
                üóë
              </button>
            </li>
          </ul>
          <h4>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</h4>
          <div class="checkbox-grid">
            <label *ngFor="let career of allCareers">
              <ng-container *ngIf="hasNotItem(career)">
                <input
                  type="checkbox"
                  (change)="onSelectToAdd(career, 'career', $event)"
                />
                {{ career }}
              </ng-container>
            </label>
          </div>
          <button class="confirm-btn" (click)="submitAddSelected('career')">
            ‡πÄ‡∏û‡∏¥‡πà‡∏°
          </button>
        </div>
      </div>
      <button class="close-btn" (click)="closeModal()">‡∏õ‡∏¥‡∏î</button>
    </div>
  </div>

  <div class="modal-overlay" *ngIf="showEditModal">
    <div class="modal-content">
      <h2>üìù ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
      <form *ngIf="editAccount" (ngSubmit)="submitEdit()" #f="ngForm">
        <label>‡∏ä‡∏∑‡πà‡∏≠</label>
        <input [(ngModel)]="editAccount.fname" name="fname" required />

        <label>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
        <input [(ngModel)]="editAccount.lname" name="lname" required />

        <label>Password</label>
        <input
          [(ngModel)]="editAccount.password"
          name="password"
          required
          type="password"
        />

        <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
        <textarea
          [(ngModel)]="editAccount.description"
          name="description"
        ></textarea>

        <div class="modal-actions">
          <button type="submit" class="confirm-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button class="close-btn" (click)="closeEditModal()" type="button">
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal-overlay" *ngIf="showDeleteModal">
    <div class="modal-content">
      <h2>‚ö†Ô∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h2>
      <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
      <div class="modal-actions">
        <button class="confirm-btn" (click)="deleteAccount()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        <button class="close-btn" (click)="cancelDelete()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      </div>
    </div>
  </div>

  <div *ngIf="loginSuccess" class="login-alert success">
    <h3>‚úÖ Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
    <button (click)="closeAlert()">‡∏ï‡∏Å‡∏•‡∏á</button>
  </div>
</div>
